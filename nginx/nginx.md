## Nginx

### 目录说明

#### Windows

```nginx
conf目录：存放配置文件的目录，包含主配置文件nginx.conf，是我们经常修改的配置文件。
contrib目录：存放开源爱好者共享的代码。
docs目录：存放文档资料。
html目录：默认存放了Nginx的错误页面和欢迎页面。
logs目录：默认存放了访问日志、错误日志和Nginx主进程pid文件。
temp目录：临时目录，用于存放Nginx运行时产生的临时文件。
nginx.exe:可执行程序，常用于Nginx服务的启动、停止等管理工作。
```

#### linux：

```nginx
*_temp目录：共有5个temp结尾的目录，用于存放Nginx运行时产生的临时文件。
conf目录：存放配置文件的目录，包含主配置文件nginx.conf，是我们经常修改的配置文件。
html目录：默认存放了Nginx的错误页面和欢迎页面等。
logs目录：默认存放了访问日志和错误日志文件。
sbin目录：默认存放了Nginx的二进制命令，常用于Nginx服务的启动、停止等管理工作。
```

### 常用的命令

```nginx
nginx -s stop ：快速关闭Nginx，可能不保存相关信息，并迅速终止web服务。
nginx -s quit ：平稳关闭Nginx，保存相关信息，有安排的结束web服务。
nginx -s reload ：因改变了Nginx相关配置，需要重新加载配置而重载。
nginx -s reopen ：重新打开日志文件。
nginx -c filename ：为 Nginx 指定一个配置文件，来代替缺省的。
nginx -t ：不运行，而仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件。
nginx -v：显示 nginx 的版本。
nginx -V：显示 nginx 的版本，编译器版本和配置参数。

rem 如果启动前已经启动nginx并记录下pid文件，会kill指定进程
nginx.exe -s stop

rem 测试配置文件语法正确性
nginx.exe -t -c conf/nginx.conf

rem 按照指定配置去启动nginx
nginx.exe -c conf/nginx.conf
我一般使用这个启动
```

### Nginx配置文件说明

```nginx

```

### 代理模式

#### 1.正向代理

正向代理（forward proxy）：是一个位于客户端(用户A)和原始服务器(origin server)(目标服务器)之间的服务器(代理服务器)，为了从原始服务器取得内容，客户端向代理服务器发送一个请求并指定目标(原始服务器)，然后代理服务器向原始服务器转交请求并将获得的内容返回给客户端。客户端必须要进行一些特别的配置才能使用正向代理。一般情况下，如果没有特别说明，代理技术默认是指正向代理技术。



从上面的概念中，我们可以知道，所谓的正向代理，就是代理服务器替代客户端(用户A)，来访问原始服务器(目标服务器)。

**举个例子：**

　　我是一个用户，我访问不了某网站，但是我能访问一个代理服务器，这个代理服务器呢,他能访问那个我不能访问的网站，于是我先连上代理服务器,告诉他我需要那个无法访问网站的内容，代理服务器去取回来,然后返回给我。从网站的角度，只在代理服务器来取内容的时候有一次记录，有时候并不知道是用户的请求，也隐藏了用户的资料，这取决于代理告不告诉网站。

**还不懂？看下图：**

![image-20201117160938187](https://i.loli.net/2020/11/17/UdxcYTkClfOHrqm.png)



#####1.1正向代理的作用：

###### **访问本来无法访问的资源**

![image-20201117162748551](https://i.loli.net/2020/11/17/ksm5bGASv9FI1KP.png)

#### 2.反向代理

 

#### 3.透明代理

### Nginx负载均衡

#### 1.轮询法（默认）



#### 2.加权轮询发（weight）



#### 3.原地址哈希法(ip_hash)



#### 4.最小连接数法（least_conn）



#### 5.Fair



#### 6.url_hash



### 日志管理和日志分割

### 动态分离





